# SiYuan CLI 需求规范

## 1. 功能需求

### 1.1 笔记本管理

- REQ-NB-001: 用户可以列出所有笔记本
  - 场景: 用户需要查看所有可用笔记本
  - 优先级: P0

- REQ-NB-002: 用户可以创建新笔记本
  - 场景: 用户需要创建新的笔记本
  - 优先级: P0

- REQ-NB-003: 用户可以重命名笔记本
  - 场景: 用户需要修改笔记本名称
  - 优先级: P1

- REQ-NB-004: 用户可以删除笔记本
  - 场景: 用户需要删除不需要的笔记本
  - 优先级: P1

- REQ-NB-005: 用户可以打开/关闭笔记本
  - 场景: 用户需要控制笔记本的加载状态
  - 优先级: P1

### 1.2 文档管理

- REQ-DOC-001: 用户可以创建文档
  - 场景: 用户需要创建新文档
  - 优先级: P0

- REQ-DOC-002: 用户可以删除文档
  - 场景: 用户需要删除不需要的文档
  - 优先级: P1

- REQ-DOC-003: 用户可以重命名文档
  - 场景: 用户需要修改文档标题
  - 优先级: P1

- REQ-DOC-004: 用户可以移动文档
  - 场景: 用户需要在笔记本间移动文档
  - 优先级: P1

- REQ-DOC-005: 用户可以导出文档
  - 场景: 用户需要导出文档为 Markdown
  - 优先级: P1

### 1.3 块操作

- REQ-BLK-001: 用户可以获取块内容
  - 场景: 用户需要查看块的 kramdown 源码
  - 优先级: P0

- REQ-BLK-002: 用户可以更新块
  - 场景: 用户需要修改块内容
  - 优先级: P0

- REQ-BLK-003: 用户可以删除块
  - 场景: 用户需要删除不需要的块
  - 优先级: P1

- REQ-BLK-004: 用户可以插入块
  - 场景: 用户需要在指定位置插入新块
  - 优先级: P0

- REQ-BLK-005: 用户可以移动块
  - 场景: 用户需要移动块到新位置
  - 优先级: P1

- REQ-BLK-006: 用户可以获取子块
  - 场景: 用户需要查看块的子元素
  - 优先级: P1

- REQ-BLK-007: 用户可以折叠/展开块
  - 场景: 用户需要控制块的展开状态
  - 优先级: P2

### 1.4 搜索

- REQ-SRC-001: 用户可以执行 SQL 查询搜索内容
  - 场景: 用户需要搜索包含特定内容的块
  - 优先级: P0

- REQ-SRC-002: 支持多种输出格式
  - 场景: 用户需要不同格式的输出用于不同用途
  - 优先级: P1

## 2. 非功能需求

- REQ-NF-001: 支持 Windows/Linux/macOS
  - 场景: 用户在不同操作系统上使用 CLI
  - 优先级: P0

- REQ-NF-002: 支持 TypeScript 类型检查
  - 场景: 确保代码类型安全
  - 优先级: P1

- REQ-NF-003: 提供详细的错误信息
  - 场景: 用户需要理解错误原因
  - 优先级: P1

- REQ-NF-004: 支持配置文件和命令行参数
  - 场景: 用户需要灵活的配置方式
  - 优先级: P0

- REQ-NF-005: 所有命令提供帮助信息
  - 场景: 用户需要了解命令用法
  - 优先级: P1

## 3. 性能需求

- PER-001: 命令响应时间 < 5 秒
- PER-002: 支持并发请求
- PER-003: 内存占用 < 100MB (空闲时)

## 4. 安全需求

- SEC-001: Token 不在日志中明文显示
- SEC-002: 支持 HTTPS API 端点
- SEC-003: 配置文件权限受限

## 5. 可用性需求

- US-001: 命令行参数遵循 POSIX 规范
- US-002: 错误消息清晰可读
- US-003: 提供命令自动补全支持
